!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.location.protocol+"//message-list.appspot.com",a=document.getElementById("container"),o=document.getElementById("header"),i=document.getElementById("content"),l=document.getElementById("place-holder"),u=document.getElementById("loader"),c={author:{name:"name",photoUrl:null},content:null,id:null,updated:null},E={x:0,y:0},s=function(e){try{if("card"==e.target.classList[0])return e.target;for(var t=e.target;t;){if(t.classList&&"card"==t.classList[0])return t;t=t.parentNode}}catch(e){}return null},d=function(e){var t=e;return e.targetTouches&&(t=e.targetTouches[0]),{x:t.clientX,y:t.clientY}};t.LOAD_BOTTOM="LOAD_BOTTOM",t.LOAD_TOP="LOAD_TOP",t.SCROLLING_DOWN="SCROLLING_DOWN",t.SCROLLING_TOP="SCROLLING_TOP",t.CLASSNAME_CARD="card",t.CLASSNAME_STORY="story",t.CLASSNAME_AUTHOR="author-section",t.CLASSNAME_PIC="author-pic",t.CLASSNAME_USER_DATA="name-section",t.CLASSNAME_USERNAME="username",t.CLASSNAME_TIMESTAMP="timestamp",t.API_PATH=r,t.API_LIMIT=50,t.ROOT_ELEMENT=a,t.HEADER_ELEMENT=o,t.CONTENT_ELEMENT=i,t.PLACE_HOLDER_ELEMENT=l,t.LOADER_ELEMENT=u,t.X_AXIS_POSITION_RANGE=100,t.Y_AXIS_POSITION_RANGE=50,t.SAFE_SCROLL_LIMIT=250,t.SAFE_ASYNC_TIMEOUT=100,t.SMOOTH_ASYNC_TIMEOUT=200,t.RETRY_API_FETCH_TIMEOUT=15e3,t.PLACE_HOLDER_OBJ=c,t.INTERACTION_OBJ=E,t.GET_INTERACTION_POINT=d,t.GET_INTERACTED_ELEMENT=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=Math.floor((new Date-e)/1e3),n=Math.floor(t/31536e3);return n>1?n+" years ago":(n=Math.floor(t/monthsRange))>1?n+" months ago":(n=Math.floor(t/86400))>1?n+" days ago":(n=Math.floor(t/3600))>1?n+" hours ago":(n=Math.floor(t/60),n>1?n+" minutes ago":Math.floor(t)+" seconds ago")},a=function(e,t){if("[object Object]"!==Object.prototype.toString.call(t))return"Not a valid needle(object)";if("[object Array]"!==Object.prototype.toString.call(e))return"Not a valid array";for(var n=-1,r=Object.keys(t)[0],a=t[r],o=0;o<e.length;o++){if(e[o][r]==a){n=o;break}}return n};t.formatTime=r,t.getIndexOfkey=a},function(e,t,n){"use strict";var r=n(3),a=function(e){return e&&e.__esModule?e:{default:e}}(r);window.addEventListener("load",function(){!function(e,t){e.IS=(0,a.default)(e,t),IS.init()}(window,document)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(1),o=n(4),i=function(e,t){var n=e.innerWidth,i=e.innerHeight,l=null,u=r.INTERACTION_OBJ,c=r.INTERACTION_OBJ,E=r.API_PATH,s=null,d=r.API_LIMIT,f=!1,T=0,p=[],_={},N=0,O=[],m=0,A=0,L=!1,h=!1,v=!1,C=!1,I=0,S=0,M=0,g=0,y=!1,R=function(){n=e.innerWidth,i=e.innerHeight},P=function(){return c.time-u.time},D=function(e){return Math.abs(e-u.y)<r.Y_AXIS_POSITION_RANGE},H=function(e){var t=u,n=t.x,a=e>n?e-n:n-e;P();return a>r.X_AXIS_POSITION_RANGE},b=function(e,t){if(_[e]){var n=_[e],r=(0,a.getIndexOfkey)(n,{id:t});r>-1&&n.splice(r,1),_[e]=n}},x=function(e){if(e){var t=e.parentNode;b(t.id,e.id);var n=e.offsetHeight;g-=n,l=null,e.remove()}},B=function(){if(y&&u.x&&c.x&&l){var e=c,t=e.x,n=e.y,r=t-u.x,a="translate3d("+r+"px, 0, 0)";H(t)&&D(n)&&(l.style.transform=a,l.style.webkitTransform=a,l.style.MozTransform=a,l.style.opacity="0.4"),y=!1}},G=function(){l.style.transform="translate(0,0)",l.style.webkitTransform="translate(0,0)",l.style.MozTransform="translate(0,0)",l.style.opacity="1"},j=function(){l&&(l.classList.add("remove"),l.innerHTML="",setTimeout(function(){x(l)},r.SMOOTH_ASYNC_TIMEOUT))},U=function(e,t){l=t,e.touches&&e.touches.length>1||(u=(0,r.GET_INTERACTION_POINT)(e))},w=function(t){u.x&&(c=(0,r.GET_INTERACTION_POINT)(t),y||(y=!0,e.requestAnimationFrame(B)))},k=function(e){var t=c,a=t.x,o=t.y;if(H(a)&&D(o)){if(l&&l.parentNode){var i=n+100;a<u.x&&(i=~i),l.style.opacity="0.2",l.style.transform="translate3d("+i+"px, 0, 0)",l.style.height=l.offsetHeight+"px",l.addEventListener("transitionend",j)}}else G();u=r.INTERACTION_OBJ,c=r.INTERACTION_OBJ,y=!1},F=function(){var e=p[p.length-1],n=(t.getElementById("page"+e),"page"+(e+1)),a=q(_[n],n);r.CONTENT_ELEMENT.appendChild(a),p.push(e+1)},Y=function(){var e=p[0],n=t.getElementById("page"+e),r="page"+(e-1);if(n){var a=q(_[r],r);n.parentNode.insertBefore(a,n),p.unshift(e-1)}},J=function(t){t<200&&(t=0),e.requestAnimationFrame(function(){r.CONTENT_ELEMENT.style.paddingTop=t+"px"})},X=function(e,t){e.parentNode.removeChild(e),A=t,J(t),p.shift(),setTimeout(function(){v=!1},100)},W=function(e,t){e.parentNode.removeChild(e),A=t,J(t),p.pop()},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.LOAD_BOTTOM;if(!v){var n=t.getElementsByClassName("page"),a=n[0],o=m=a.offsetHeight;if(e==r.LOAD_BOTTOM&&T>2){if(v)return;v=!0,p[2]<T&&F(),A>0&&(o=Number(A)+Number(m)),p.length>2?X(a,o):v=!1}else{if(1==p[0])return;Y(),o=A-(O.length>0?O.pop():m),p.length>2&&W(n[n.length-1],o)}}},q=function(e,n){var a=t.createDocumentFragment(),i=t.createElement("div");i.id=n,i.className="page";var l=!0,u=!1,c=void 0;try{for(var s,d=e[Symbol.iterator]();!(l=(s=d.next()).done);l=!0){var f=s.value,T=t.createElement("div"),p=(0,o.prepareAuthorInfoElement)(f,E),_=(0,o.prepareStoryElement)(f,n);T.className=r.CLASSNAME_CARD,T.id=f.id,T.appendChild(p),T.appendChild(_),i.appendChild(T)}}catch(e){u=!0,c=e}finally{try{!l&&d.return&&d.return()}finally{if(u)throw c}}return a.appendChild(i),a},K=function(e,t){var n="page"+t,a=q(e,n);r.CONTENT_ELEMENT.appendChild(a),p.push(T)},Q=function(e){for(var n=t.createDocumentFragment(),a=0;a<e;){var i=r.PLACE_HOLDER_OBJ,l=t.createElement("div"),u=(0,o.prepareAuthorInfoElement)(i),c=(0,o.prepareStoryElement)(i,"page");l.className=r.CLASSNAME_CARD,l.id="fake-"+a,l.appendChild(u),l.appendChild(c),n.appendChild(l),a++}r.PLACE_HOLDER_ELEMENT.appendChild(n)},V=function(){for(var e=t.createDocumentFragment(),n=0;n<1;){var a=r.PLACE_HOLDER_OBJ,i=t.createElement("div"),l=(0,o.prepareAuthorInfoElement)(a),u=(0,o.prepareStoryElement)(a,"page");i.className=r.CLASSNAME_CARD,i.id="loader-"+n,i.appendChild(l),i.appendChild(u),e.appendChild(i),n++}r.LOADER_ELEMENT.appendChild(e),r.LOADER_ELEMENT.style.opacity=1,h=!0,r.PLACE_HOLDER_ELEMENT.remove()},Z=function(e,t){_["page"+e]=t},$=function(){var e=p.length;return!(T>2&&e>2&&p[e-1]!=T)},ee=function e(){if(!f){f=!0;var t=E+"/messages?limit="+d;s&&(t+="&pageToken="+s),s=null,fetch(t).then(function(e){return e.json()}).then(function(e){if(!e.messages)return void(L=!0);f=!1,T++,s=e.pageToken,N+=e.messages.length,Z(T,e.messages),K(e.messages,T),h||V()}).catch(function(t){L=!0,f=!1,setTimeout(function(){e()},r.RETRY_API_FETCH_TIMEOUT)})}},te=function(e){e.preventDefault(),I=e.target.scrollTop;var t=r.SCROLLING_TOP;if(I>S&&(t=r.SCROLLING_DOWN),S=I,M){var n=r.ROOT_ELEMENT.scrollHeight-r.ROOT_ELEMENT.clientHeight-r.SAFE_SCROLL_LIMIT;if(t==r.SCROLLING_DOWN&&I>n){if(M=I,g=M-m,$()&&ee(),L)return;z()}else t==r.SCROLLING_TOP&&I<g&&(M=I,g-=m,z(r.LOAD_TOP))}else M=I},ne=function(e){var t=e.target.scrollTop;(t<A||A<0)&&(A=t,t>m&&(A=t-m||1),J(A),g=A),(g<0||t<100)&&(g=0,1!=p[0]&&(Y(),p.unshift(1)))},re=function(){r.ROOT_ELEMENT.addEventListener("scroll",function(t){te(t),e.clearTimeout(C),C=setTimeout(function(){ne(t)},r.SAFE_ASYNC_TIMEOUT)},!1),r.CONTENT_ELEMENT.addEventListener("touchstart",function(e){var t=(0,r.GET_INTERACTED_ELEMENT)(e);t&&U(e,t)}),r.CONTENT_ELEMENT.addEventListener("touchmove",w),r.CONTENT_ELEMENT.addEventListener("touchend",k),e.addEventListener("resize",R)},ae=function(e){e.api&&(E=e.api),e.limit&&(d=e.limit>=10?e.limit:10)};return{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ae(e),Q(3),re(),ee()}}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareAuthorInfoElement=t.prepareStoryElement=void 0;var r=n(1),a=n(0),o=function(e,t){var n=new Image;n.onload=function(){e.style.background="url("+t+")",e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.opacity=1},n.src=t},i=function(e){var t=document.createElement("div");return t.className=a.CLASSNAME_PIC,e&&(t.style.opacity=0,o(t,e)),t},l=function(e,t){var n=document.createElement("div");n.className=a.CLASSNAME_USER_DATA;var o=document.createElement("span");o.className=a.CLASSNAME_USERNAME,o.innerHTML=e.name;var i=document.createElement("span");return i.className=a.CLASSNAME_TIMESTAMP,i.innerHTML=t?(0,r.formatTime)(new Date(t)):"",n.appendChild(o),n.appendChild(i),n},u=function(e,t){var n=document.createElement("div");n.className=a.CLASSNAME_AUTHOR;var r=i(t+e.author.photoUrl),o=l(e.author,e.updated);return n.appendChild(r),n.appendChild(o),n},c=function(e,t){var n=document.createElement("div");return n.className=a.CLASSNAME_STORY,n.innerHTML=e.content,n};t.prepareStoryElement=c,t.prepareAuthorInfoElement=u}]);