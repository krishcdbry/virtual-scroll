!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.location.protocol+"//message-list.appspot.com",a=document.getElementById("container"),o=document.getElementById("header"),i=document.getElementById("content"),l=document.getElementById("place-holder"),E=document.getElementById("loader"),c={author:{name:"name",photoUrl:null,isLoader:!0},content:null,id:null,updated:null},d={x:0,y:0},u=function(e){try{if("card"==e.target.classList[0])return e.target;for(var t=e.target;t;){if(t.classList&&"card"==t.classList[0])return t;t=t.parentNode}}catch(e){}return null},s=function(e){var t=e;return e.targetTouches&&(t=e.targetTouches[0]),{x:t.clientX,y:t.clientY}};t.LOAD_BOTTOM="LOAD_BOTTOM",t.LOAD_TOP="LOAD_TOP",t.SCROLLING_DOWN="SCROLLING_DOWN",t.SCROLLING_TOP="SCROLLING_TOP",t.CLASSNAME_CARD="card",t.CLASSNAME_STORY="story",t.CLASSNAME_AUTHOR="author-section",t.CLASSNAME_PIC="author-pic",t.CLASSNAME_USER_DATA="name-section",t.CLASSNAME_USERNAME="username",t.CLASSNAME_TIMESTAMP="timestamp",t.API_PATH=r,t.API_LIMIT=50,t.ROOT_ELEMENT=a,t.HEADER_ELEMENT=o,t.CONTENT_ELEMENT=i,t.PLACE_HOLDER_ELEMENT=l,t.LOADER_ELEMENT=E,t.X_AXIS_POSITION_RANGE=100,t.Y_AXIS_POSITION_RANGE=50,t.SAFE_SCROLL_LIMIT=250,t.SAFE_ASYNC_TIMEOUT=100,t.SMOOTH_ASYNC_TIMEOUT=200,t.RETRY_API_FETCH_TIMEOUT=15e3,t.PLACE_HOLDER_OBJ=c,t.INTERACTION_OBJ=d,t.GET_INTERACTION_POINT=s,t.GET_INTERACTED_ELEMENT=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=Math.floor((new Date-e)/1e3),n=Math.floor(t/31536e3);return n>1?n+" years ago":(n=Math.floor(t/monthsRange))>1?n+" months ago":(n=Math.floor(t/86400))>1?n+" days ago":(n=Math.floor(t/3600))>1?n+" hours ago":(n=Math.floor(t/60),n>1?n+" minutes ago":Math.floor(t)+" seconds ago")},a=function(e,t){if("[object Object]"!==Object.prototype.toString.call(t))return"Not a valid needle(object)";if("[object Array]"!==Object.prototype.toString.call(e))return"Not a valid array";for(var n=-1,r=Object.keys(t)[0],a=t[r],o=0;o<e.length;o++){if(e[o][r]==a){n=o;break}}return n};t.formatTime=r,t.getIndexOfkey=a},function(e,t,n){"use strict";var r=n(0),a=n(1),o=n(3);try{window._IS=function(e,t){var n=e.innerWidth,i=e.innerHeight,l=null,E=r.INTERACTION_OBJ,c=r.INTERACTION_OBJ,d=r.API_PATH,u=null,s=r.API_LIMIT,T=!1,p=0,f=[],m={},N=0,_=0,O=0,A=!1,L=!1,h=!1,v=!1,C=0,I=0,M=0,S=0,g=!1,y=function(){n=e.innerWidth,i=e.innerHeight},R=function(e){return Math.abs(e-E.y)<r.Y_AXIS_POSITION_RANGE},P=function(e){var t=E,n=t.x;return(e>n?e-n:n-e)>r.X_AXIS_POSITION_RANGE},D=function(e,t){if(m[e]){var n=m[e],r=(0,a.getIndexOfkey)(n,{id:t});r>-1&&n.splice(r,1),m[e]=n}},H=function(e){if(e){var t=e.parentNode;if(t){D(t.id,e.id);var n=e.offsetHeight;S-=n,l=null,e.remove()}}},b=function(){if(g&&E.x&&c.x&&l){var e=c,t=e.x,n=e.y,r=t-E.x,a="translate3d("+r+"px, 0, 0)";R(n)&&(l.style.transform=a,l.style.webkitTransform=a,l.style.MozTransform=a,P(t)&&(l.style.opacity="0.4")),g=!1}},x=function(){e.requestAnimationFrame(function(){var e="translate3d(0,0,0)";l.style.transform=e,l.style.webkitTransform=e,l.style.MozTransform=e,l.style.opacity="1"})},B=function(e){var t=e.target;t&&(t.classList.add("remove"),t.innerHTML="",setTimeout(function(){H(t)},r.SMOOTH_ASYNC_TIMEOUT))},G=function(e,t){l=t,e.touches&&e.touches.length>1||(E=(0,r.GET_INTERACTION_POINT)(e))},U=function(t){E.x&&(c=(0,r.GET_INTERACTION_POINT)(t),g||(g=!0,e.requestAnimationFrame(b)))},j=function(t){var a=c,o=a.x,i=a.y;if(P(o)&&R(i)){var d=l;if(l&&l.parentNode){var u=n+100;o<E.x&&(u=~u),e.requestAnimationFrame(function(){d.style.opacity="0.2",d.style.transform="translate3d("+u+"px, 0, 0)",d.style.height=l.offsetHeight+"px",d.addEventListener("transitionend",B)})}}else x();E=r.INTERACTION_OBJ,c=r.INTERACTION_OBJ,g=!1},w=function(){var e=f[f.length-1],n=(t.getElementById("page"+e),"page"+(e+1)),a=W(m[n],n);r.CONTENT_ELEMENT.appendChild(a),f.push(e+1)},F=function(){var e=f[0],n=t.getElementById("page"+e),r="page"+(e-1);if(n){var a=W(m[r],r);n.parentNode.insertBefore(a,n),f.unshift(e-1)}},k=function(t){t<200&&(t=0),e.requestAnimationFrame(function(){r.CONTENT_ELEMENT.style.paddingTop=t+"px"})},Y=function(e,t){e.parentNode.removeChild(e),O=t,k(t),f.shift(),setTimeout(function(){h=!1},100)},J=function(e,t){e.parentNode.removeChild(e),O=t,k(t),f.pop()},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.LOAD_BOTTOM;if(!h){var n=t.getElementsByClassName("page"),a=n[0],o=_=a.offsetHeight;if(e==r.LOAD_BOTTOM&&p>2){if(h)return;h=!0,f[2]<p&&w(),O>0&&(o=Number(O)+Number(_)),f.length>2?Y(a,o):h=!1}else{if(1==f[0])return;F(),o=O-_,f.length>2&&J(n[n.length-1],o)}}},W=function(e,n){var a=t.createDocumentFragment(),i=t.createElement("div");i.id=n,i.className="page";var l=!0,E=!1,c=void 0;try{for(var u,s=e[Symbol.iterator]();!(l=(u=s.next()).done);l=!0){var T=u.value,p=t.createElement("div"),f=(0,o.prepareAuthorInfoElement)(T,d),m=(0,o.prepareStoryElement)(T,n);p.className=r.CLASSNAME_CARD,p.id=T.id,p.appendChild(f),p.appendChild(m),i.appendChild(p)}}catch(e){E=!0,c=e}finally{try{!l&&s.return&&s.return()}finally{if(E)throw c}}return a.appendChild(i),a},q=function(e,t){var n="page"+t,a=W(e,n);r.CONTENT_ELEMENT.appendChild(a),f.push(p)},z=function(e){for(var n=t.createDocumentFragment(),a=0;a<e;){var i=r.PLACE_HOLDER_OBJ,l=t.createElement("div"),E=(0,o.prepareAuthorInfoElement)(i),c=(0,o.prepareStoryElement)(i,"page");l.className=r.CLASSNAME_CARD,l.id="fake-"+a,l.appendChild(E),l.appendChild(c),n.appendChild(l),a++}r.PLACE_HOLDER_ELEMENT.appendChild((0,o.renderLoaderAnim)()),r.PLACE_HOLDER_ELEMENT.appendChild(n)},V=function(){for(var e=t.createDocumentFragment(),n=0;n<1;){var a=r.PLACE_HOLDER_OBJ,i=t.createElement("div"),l=(0,o.prepareAuthorInfoElement)(a),E=(0,o.prepareStoryElement)(a,"page");i.className=r.CLASSNAME_CARD,i.id="loader-"+n,i.appendChild(l),i.appendChild(E),e.appendChild(i),n++}r.LOADER_ELEMENT.appendChild((0,o.renderLoaderAnim)()),r.LOADER_ELEMENT.appendChild(e),r.LOADER_ELEMENT.style.opacity=1,r.PLACE_HOLDER_ELEMENT.remove(),L=!0},K=function(e,t){m["page"+e]=t},Q=function(){var e=f.length;return!(p>2&&e>2&&f[e-1]!=p)},Z=function e(){if(!T){T=!0;var t=d+"/messages?limit="+s;u&&(t+="&pageToken="+u),u=null,fetch(t).then(function(e){return e.json()}).then(function(e){if(!e.messages)return void(A=!0);T=!1,p++,u=e.pageToken,N+=e.messages.length,K(p,e.messages),q(e.messages,p),L||V()}).catch(function(t){A=!0,T=!1,setTimeout(function(){e()},r.RETRY_API_FETCH_TIMEOUT)})}},$=function(e){e.preventDefault(),C=e.target.scrollTop;var t=r.SCROLLING_TOP;if(C>I&&(t=r.SCROLLING_DOWN),I=C,M){var n=r.ROOT_ELEMENT.scrollHeight-r.ROOT_ELEMENT.clientHeight-r.SAFE_SCROLL_LIMIT;if(t==r.SCROLLING_DOWN&&C>n){if(M=C,S=M-_,Q()&&Z(),A)return;X()}else t==r.SCROLLING_TOP&&C<S&&(M=C,S-=_,X(r.LOAD_TOP))}else M=C},ee=function(e){var t=e.target.scrollTop;(t<O||O<0)&&(O=t,t>_&&(O=t-_||1),k(O),S=O),(S<0||t<100)&&(S=0,1!=f[0]&&(F(),f.unshift(1)))},te=function(){r.ROOT_ELEMENT.addEventListener("scroll",function(t){$(t),e.clearTimeout(v),v=setTimeout(function(){ee(t)},r.SAFE_ASYNC_TIMEOUT)},!1),r.CONTENT_ELEMENT.addEventListener("touchstart",function(e){var t=(0,r.GET_INTERACTED_ELEMENT)(e);t&&G(e,t)}),r.CONTENT_ELEMENT.addEventListener("touchmove",U),r.CONTENT_ELEMENT.addEventListener("touchend",j),r.CONTENT_ELEMENT.addEventListener("touchcancel",j),e.addEventListener("resize",y)},ne=function(e){e.api&&(d=e.api),e.limit&&(s=e.limit>=10?e.limit:10)};return{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ne(e),z(1),te(),Z()}}}(window,document),console.log("Infinite Scroll - Loaded - V1.0.0")}catch(e){console.error("Error loading plugin",e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderLoaderAnim=t.prepareAuthorInfoElement=t.prepareStoryElement=void 0;var r=n(1),a=n(0),o=function(e,t){var n=new Image;n.onload=function(){e.style.background="url("+t+")",e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.opacity=1},n.src=t},i=function(){var e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div");return e.className="loader-anim",e.appendChild(t),e.appendChild(n),e.appendChild(r),e},l=function(e){var t=document.createElement("div");return t.className=a.CLASSNAME_PIC,e&&(t.style.opacity=0,o(t,e)),t},E=function(e,t){var n=document.createElement("div");n.className=a.CLASSNAME_USER_DATA;var o=document.createElement("span");o.className=a.CLASSNAME_USERNAME,o.innerHTML=e.name;var l=document.createElement("span");return l.className=a.CLASSNAME_TIMESTAMP,l.innerHTML=t?(0,r.formatTime)(new Date(t)):"",e.isLoader&&n.appendChild(i()),n.appendChild(o),n.appendChild(l),n},c=function(e,t){var n=document.createElement("div");if(n.className=a.CLASSNAME_AUTHOR,e.id){var r=l(t+e.author.photoUrl);n.appendChild(r)}var o=E(e.author,e.updated);return n.appendChild(o),n},d=function(e,t){var n=document.createElement("div");return n.className=a.CLASSNAME_STORY,n.innerHTML=e.content,n};t.prepareStoryElement=d,t.prepareAuthorInfoElement=c,t.renderLoaderAnim=i}]);