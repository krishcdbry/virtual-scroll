!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.location.protocol+"//message-list.appspot.com",o=document.getElementById("container"),a=document.getElementById("header"),i=document.getElementById("content"),l=document.getElementById("place-holder"),c=document.getElementById("loader"),u={author:{name:"name",photoUrl:null},content:null,id:null,updated:null},s={x:0,y:0},E=function(e){try{if("card"==e.target.classList[0])return e.target;for(var t=e.target;t;){if(t.classList&&"card"==t.classList[0])return t;t=t.parentNode}}catch(e){}return null},d=function(e){var t=e;return e.targetTouches&&(t=e.targetTouches[0]),{x:t.clientX,y:t.clientY}};t.LOAD_BOTTOM="LOAD_BOTTOM",t.LOAD_TOP="LOAD_TOP",t.SCROLLING_DOWN="SCROLLING_DOWN",t.SCROLLING_TOP="SCROLLING_TOP",t.CLASSNAME_CARD="card",t.CLASSNAME_STORY="story",t.CLASSNAME_AUTHOR="author-section",t.CLASSNAME_PIC="author-pic",t.CLASSNAME_USER_DATA="name-section",t.CLASSNAME_USERNAME="username",t.CLASSNAME_TIMESTAMP="timestamp",t.API_PATH=r,t.API_LIMIT=50,t.ROOT_ELEMENT=o,t.HEADER_ELEMENT=a,t.CONTENT_ELEMENT=i,t.PLACE_HOLDER_ELEMENT=l,t.LOADER_ELEMENT=c,t.X_AXIS_POSITION_RANGE=100,t.Y_AXIS_POSITION_RANGE=50,t.SAFE_ASYNC_TIMEOUT=100,t.SMOOTH_ASYNC_TIMEOUT=200,t.RETRY_API_FETCH_TIMEOUT=15e3,t.PLACE_HOLDER_OBJ=u,t.INTERACTION_OBJ=s,t.GET_INTERACTION_POINT=d,t.GET_INTERACTED_ELEMENT=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=Math.floor((new Date-e)/1e3),n=Math.floor(t/31536e3);return n>1?n+" years ago":(n=Math.floor(t/monthsRange))>1?n+" months ago":(n=Math.floor(t/86400))>1?n+" days ago":(n=Math.floor(t/3600))>1?n+" hours ago":(n=Math.floor(t/60),n>1?n+" minutes ago":Math.floor(t)+" seconds ago")},o=function(e,t){if("[object Object]"!==Object.prototype.toString.call(t))return"Not a valid needle(object)";if("[object Array]"!==Object.prototype.toString.call(e))return"Not a valid array";for(var n=-1,r=Object.keys(t)[0],o=t[r],a=0;a<e.length;a++){if(e[a][r]==o){n=a;break}}return n};t.formatTime=r,t.getIndexOfkey=o},function(e,t,n){"use strict";var r=n(3),o=function(e){return e&&e.__esModule?e:{default:e}}(r);window.addEventListener("load",function(){!function(e,t){e.IS=(0,o.default)(e,t),IS.init()}(window,document)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(1),a=n(4),i=function(e,t){var n=e.innerWidth,i=e.innerHeight,l=null,c=r.INTERACTION_OBJ,u=r.INTERACTION_OBJ,s=r.API_PATH,E=null,d=r.API_LIMIT,f=!1,T=0,p=[],N={},_=0,m=[],O=0,A=0,g=!1,L=!1,h=!1,v=!1,C=!1,I=0,M=0,S=0,y=0,R=0,P=!1,D=function(){n=e.innerWidth,i=e.innerHeight},H=function(){return u.time-c.time},b=function(e){return Math.abs(e-c.y)<r.Y_AXIS_POSITION_RANGE},x=function(e){var t=c,n=t.x,o=e>n?e-n:n-e;H();return o>r.X_AXIS_POSITION_RANGE},B=function(e,t){if(N[e]){var n=N[e],r=(0,o.getIndexOfkey)(n,{id:t});r>-1&&n.splice(r,1),N[e]=n}},G=function(e){if(e){var t=e.parentNode;B(t.id,e.id);var n=e.offsetHeight;y-=n,R-=n,l=null,e.remove()}},j=function(){if(P&&c.x&&u.x&&l){var e=u,t=e.x,n=e.y,r=t-c.x,o="translate3d("+r+"px, 0, 0)";x(t)&&b(n)&&(l.style.transform=o,l.style.webkitTransform=o,l.style.MozTransform=o,l.style.opacity="0.4"),P=!1}},U=function(){l.style.transform="translate(0,0)",l.style.webkitTransform="translate(0,0)",l.style.MozTransform="translate(0,0)",l.style.opacity="1"},w=function(){l&&(l.classList.add("remove"),l.innerHTML="",setTimeout(function(){G(l)},r.SMOOTH_ASYNC_TIMEOUT))},k=function(e,t){l=t,e.touches&&e.touches.length>1||(c=(0,r.GET_INTERACTION_POINT)(e))},F=function(t){c.x&&(u=(0,r.GET_INTERACTION_POINT)(t),P||(P=!0,e.requestAnimationFrame(j)))},Y=function(e){var t=u,o=t.x,a=t.y;if(x(o)&&b(a)){if(l&&l.parentNode){var i=n+100;o<c.x&&(i=~i),l.style.opacity="0.2",l.style.transform="translate3d("+i+"px, 0, 0)",l.style.height=l.offsetHeight+"px",l.addEventListener("transitionend",w)}}else U();c=r.INTERACTION_OBJ,u=r.INTERACTION_OBJ,P=!1},J=function(){var e=p[p.length-1],n=(t.getElementById("page"+e),"page"+(e+1)),o=Q(N[n],n);r.CONTENT_ELEMENT.appendChild(o),p.push(e+1)},X=function(){var e=p[0],n=t.getElementById("page"+e),r="page"+(e-1);if(n){var o=Q(N[r],r);n.parentNode.insertBefore(o,n),p.unshift(e-1)}},W=function(t){t<200&&(t=0),e.requestAnimationFrame(function(){r.CONTENT_ELEMENT.style.paddingTop=t+"px"})},z=function(e,t){console.log("Removing Page",e,t),e.parentNode.removeChild(e),A=t,W(t),p.shift(),setTimeout(function(){v=!1,console.log("Process Rendering False")},100)},q=function(e,t){e.parentNode.removeChild(e),A=t,W(t),p.pop(),setTimeout(function(){v=!1,console.log("Process Rendering False")},100)},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.LOAD_BOTTOM;if(!v){var n=t.getElementsByClassName("page"),o=n[0],a=O=o.offsetHeight;if(console.log("TotalPageCount",T,e),e==r.LOAD_BOTTOM&&T>2)v=!0,p[2]<T&&J(),A>0&&(a=Number(A)+Number(O)),p.length>2&&(console.log("Removing section Item",o,a),z(o,a));else{if(1==p[0])return;v=!0,X(),a=A-(m.length>0?m.pop():O),p.length>2&&q(n[n.length-1],a)}}},Q=function(e,n){var o=t.createDocumentFragment(),i=t.createElement("div");i.id=n,i.className="page";var l=!0,c=!1,u=void 0;try{for(var E,d=e[Symbol.iterator]();!(l=(E=d.next()).done);l=!0){var f=E.value,T=t.createElement("div"),p=(0,a.prepareAuthorInfoElement)(f,s),N=(0,a.prepareStoryElement)(f,n);T.className=r.CLASSNAME_CARD,T.id=f.id,T.appendChild(p),T.appendChild(N),i.appendChild(T)}}catch(e){c=!0,u=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw u}}return o.appendChild(i),o},V=function(e,t){var n="page"+t,o=Q(e,n);r.CONTENT_ELEMENT.appendChild(o),p.push(T)},Z=function(e){for(var n=t.createDocumentFragment(),o=0;o<e;){var i=r.PLACE_HOLDER_OBJ,l=t.createElement("div"),c=(0,a.prepareAuthorInfoElement)(i),u=(0,a.prepareStoryElement)(i,"page");l.className=r.CLASSNAME_CARD,l.id="fake-"+o,l.appendChild(c),l.appendChild(u),n.appendChild(l),o++}r.PLACE_HOLDER_ELEMENT.appendChild(n)},$=function(){for(var e=t.createDocumentFragment(),n=0;n<1;){var o=r.PLACE_HOLDER_OBJ,i=t.createElement("div"),l=(0,a.prepareAuthorInfoElement)(o),c=(0,a.prepareStoryElement)(o,"page");i.className=r.CLASSNAME_CARD,i.id="loader-"+n,i.appendChild(l),i.appendChild(c),e.appendChild(i),n++}r.LOADER_ELEMENT.appendChild(e),L=!0,r.PLACE_HOLDER_ELEMENT.style.opacity=0,h=!0},ee=function(e,t){N["page"+e]=t},te=function(){return console.log(p,T),!(T>2&&p.length>2&&p[2]!=T)},ne=function(){return T>3&&p.length>=3&&p[2],!0},re=function e(){if(!f){f=!0;var t=s+"/messages?limit="+d;E&&(t+="&pageToken="+E),E=null,fetch(t).then(function(e){return e.json()}).then(function(e){if(!e.messages)return void(g=!0);f=!1,T++,E=e.pageToken,_+=e.messages.length,ee(T,e.messages),ne()&&V(e.messages,T),L||$()}).catch(function(t){g=!0,f=!1,setTimeout(function(){e()},r.RETRY_API_FETCH_TIMEOUT)})}},oe=function(e){e.preventDefault(),I=e.target.scrollTop;var t=r.SCROLLING_TOP;if(I>M&&(t=r.SCROLLING_DOWN),M=I,S)if(t==r.SCROLLING_DOWN&&I>r.ROOT_ELEMENT.scrollHeight-r.ROOT_ELEMENT.clientHeight-100){if(S=I,R=S-O,te()&&re(),g)return;K()}else t==r.SCROLLING_TOP&&I<R&&(S=I,R-=O,K(r.LOAD_TOP));else S=I},ae=function(e){var t=e.target.scrollTop;console.log(t,A),(t<A||A<0)&&(A=t,t>O&&(A=t-O||1),W(A),R=A),(R<0||0==t)&&(R=1,1!=p[0]&&console.log("trying"))},ie=function(){r.ROOT_ELEMENT.addEventListener("scroll",function(t){oe(t),e.clearTimeout(C),C=setTimeout(function(){ae(t)},r.SAFE_ASYNC_TIMEOUT)},!1),r.CONTENT_ELEMENT.addEventListener("touchstart",function(e){var t=(0,r.GET_INTERACTED_ELEMENT)(e);t&&k(e,t)}),r.CONTENT_ELEMENT.addEventListener("touchmove",F),r.CONTENT_ELEMENT.addEventListener("touchend",Y),e.addEventListener("resize",D)},le=function(e){e.api&&(s=e.api),e.limit&&(d=e.limit>=10?e.limit:10)};return{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};le(e),Z(3),ie(),re()}}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prepareAuthorInfoElement=t.prepareStoryElement=void 0;var r=n(1),o=n(0),a=function(e,t){var n=new Image;n.onload=function(){e.style.background="url("+t+")",e.style.backgroundSize="cover",e.style.backgroundPosition="center",e.style.opacity=1},n.src=t},i=function(e){var t=document.createElement("div");return t.className=o.CLASSNAME_PIC,e&&(t.style.opacity=0,a(t,e)),t},l=function(e,t){var n=document.createElement("div");n.className=o.CLASSNAME_USER_DATA;var a=document.createElement("span");a.className=o.CLASSNAME_USERNAME,a.innerHTML=e.name;var i=document.createElement("span");return i.className=o.CLASSNAME_TIMESTAMP,i.innerHTML=t?(0,r.formatTime)(new Date(t)):"",n.appendChild(a),n.appendChild(i),n},c=function(e,t){var n=document.createElement("div");n.className=o.CLASSNAME_AUTHOR;var r=i(t+e.author.photoUrl),a=l(e.author,e.updated);return n.appendChild(r),n.appendChild(a),n},u=function(e,t){var n=document.createElement("div");return n.className=o.CLASSNAME_STORY,n.innerHTML=e.content,n};t.prepareStoryElement=u,t.prepareAuthorInfoElement=c}]);